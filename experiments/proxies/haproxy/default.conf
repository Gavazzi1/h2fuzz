global
  log stdout format raw local0

defaults
  timeout connect  5000
  timeout client  10000
  timeout server  10000
  mode http
  log global
  option httplog

frontend proxyserver
  bind *:443 ssl crt /usr/local/etc/haproxy/server.pem alpn h2,http/1.1
  stats uri /haproxy?stats
  http-request capture req.hdr(Host) len 100
#  http-request add-header x-method %[capture.req.method]
#  http-request add-header x-uri %[capture.req.uri]
#  http-request add-header x-query %[query]
#  http-request add-header x-proto %[capture.req.ver]
#  http-request add-header x-host %[url]
  use_backend originserver
  log-format "%ci:%cp [%tr] %ft %b/%s %TR/%Tw/%Tc/%Tr/%Ta %ST %B %CC %CS %tsc %ac/%fc/%bc/%sc/%rc %sq/%bq %hr %hs | method is: %{+E,+Q}HM | uri is: %{+E,+Q}HP | host is: %[capture.req.hdr(0)]"

backend originserver
  balance roundrobin
  server server1 127.0.0.1:8080

